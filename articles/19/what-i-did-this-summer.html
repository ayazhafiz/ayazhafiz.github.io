

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?" />

<title>
  
    What I Did Summer 2019
  
</title>
<meta name="description" content="A summary of my Summer 2019." />

<link
  rel="canonical"
  href="/articles/19/what-i-did-this-summer"
/>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
  });
</script>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
></script>



    <link
      rel="stylesheet"
      type="text/css"
      href="/css/post.css?1610343426391514933"
    />
  </head>

  <style></style>

  <body>
    <div class="container post">
      <div class="panel">
        <div class="column-right what i did summer 2019-main">
          <section class="nav">
  <a class="nav-link" href="/about">about</a><a class="nav-link" href="/cc">cc</a><a class="nav-link" href="/vis">vis</a><a class="nav-link" href="https://forms.gle/RhcifB1j5aecMPFA8">feedback</a>
</section>
 <h1 class="title">What I Did Summer 2019</h1>
<p class="byline">August 10, 2019</p>

<article class="post">
  <p><span class="note"><label for="whatididdoc" class="margin-toggle">⊕</label></span><input type="checkbox" id="whatididdoc" class="margin-toggle"><span class="marginnote">A <em>What I Did</em> is my intersection
between what Julia Evans describes as a
<a href="https://www.jvns.ca/blog/brag-documents/">brag document</a> and a
<a href="https://cc.ayazhafiz.com/articles/18/where-im-going">Where I’m Going</a>, applied
to relatively short time frame.</span></p>

<p>This summer I worked with the <a href="https://angular.io">Angular Team</a> at Google in
Sunnyvale, CA. I feel incredibly fortunate to have had such an experience,
during which I</p>

<ul>
  <li>shipped an Angular indexer for all of Google’s internal codebase,</li>
  <li>improved a TypeScript indexer, including adding plugin support,</li>
  <li>added a semantic analysis API to the open-source Angular project.</li>
</ul>

<p>I felt these were interesting things to work on, and the people around me were
even more interesting. The company’s work environment was one of the first I’ve
been able to be my whole self in. I have many other thoughts about the
experience and have been thinking about how I can share and give this experience
to
others<span class="note"><label for="futurecc" class="margin-toggle sidenote-number"></label></span><input type="checkbox" id="futurecc" class="margin-toggle"><span class="sidenote">This will be a <a href="#share-experience">future <code class="language-plaintext highlighter-rouge">cc</code> post.</a></span>.
In the meantime, please
<a href="mailto:ayaz.hafiz.1@gmail.com?subject=Re:%20Summer%202019%20-%20CC">email me</a>
if you’d like to chat!</p>

<h3 id="projects">
<a class="header-anchor" href="#projects"></a>Projects</h3>

<h4 id="1--angular-indexer">
<a class="header-anchor" href="#1--angular-indexer"></a><span class="el">1:</span>  Angular Indexer</h4>

<p>I designed, developed, and shipped an
indexer for <a href="https://github.com/angular/angular">Angular</a> source code. This was
a fantastic project with unexpected complexity throughout, even in its very
early stages. The indexer used the <a href="https://github.com/kythe/kythe">Kythe</a>
framework, which has a
<a href="https://xrefs-dot-kythe-repo.appspot.com/#kythe/cxx/indexer/cxx/marked_source.cc?corpus=kythe&amp;signature">sample UI</a>
demonstrating the kinds of cross-references a Kythe indexer can generate.</p>

<p>The project was initially scoped out to provide indexing information about
interpolated properties and methods in templates. For example, given an Angular
template</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/016102ae4e643ac1731d268c2d86db61.js"> </script>

<p>and component</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/bddce1d2398cb64ad3070ebd22940077.js"> </script>

<p>the indexer was to generate cross-references and usage information about the
class property <code class="language-plaintext highlighter-rouge">myProperty</code>.</p>

<p>I showed this was reliably practicable in the first half of my internship, then
spent the next quarter of my internship adding support for the rest of the Angular
<a href="https://angular.io/guide/template-syntax">template syntax</a> and rolling out the
indexer to production on all of Google’s internal
codebase<span class="note"><label for="ngmodule" class="margin-toggle sidenote-number"></label></span><input type="checkbox" id="ngmodule" class="margin-toggle"><span class="sidenote">Browsed by more than 45K developers, and consisting of more than 26K Angular modules!</span>.
The last quarter of my internship I fixed bugs, hacked on some Rust stuff, and
worked with customers of <a href="#3--typescript-indexer">TypeScript indexer plugins</a>.</p>

<p>I gave a talk on developing the Angular indexer:</p>

<figure class="fullwidth resp-iframe-container">
  <iframe class="resp-iframe" src="https://docs.google.com/presentation/d/e/2PACX-1vS6faRapIClhDbsSLqn7Zc3Wuqca2J08fnSJaKqFIT4IVtW9JZR4WNXvvFZyMncp8rnzJ1DtxlKb7d5/embed?start=false&amp;loop=false&amp;delayms=3000" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
</figure>

<p><br></p>
<h4 id="2--angular-indexing-api">
<a class="header-anchor" href="#2--angular-indexing-api"></a><span class="el">2:</span>  Angular Indexing API</h4>

<p>As part of my work on the Angular indexer, I needed to extract semantic
information about an Angular project. To enable this, I created a new semantic
analysis API called the
<a href="https://github.com/angular/angular/tree/master/packages/compiler-cli/src/ngtsc/indexer">Angular indexing API</a>
on the Angular compiler.</p>

<p>The indexing API is fairly small, TypeScript-compiler-esque, and is very easy to use:</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/5689ff6d1a4a4a236d2c7abe04fd5394.js"> </script>

<p>There are now some thoughts of using this API for an open-source Angular indexer
and of using it in the Angular language service.</p>

<p>Near the end of my internship, I gave a talk on what I learned contributing to a
large open source project like Angular:</p>

<figure class="fullwidth resp-iframe-container">
  <iframe class="resp-iframe" src="https://docs.google.com/presentation/d/e/2PACX-1vTDQuGFkUvK7sx4R_wO4PWeEuJMmK0sZLWKK7OVj40hYa5E_O_nal1Aw09XIzIkv32MQefpcFU7hztq/embed?start=false&amp;loop=false&amp;delayms=3000" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
</figure>

<p><br></p>
<h4 id="3--typescript-indexer">
<a class="header-anchor" href="#3--typescript-indexer"></a><span class="el">3:</span>  TypeScript Indexer</h4>

<p>I added many new features to the open-source Kythe
<a href="https://github.com/kythe/kythe/tree/master/kythe/typescript">TypeScript indexer</a>,
including</p>

<ul>
  <li>new cross-reference features,</li>
  <li>information about overridden methods on a class,</li>
  <li>a
<a href="https://github.com/kythe/kythe/tree/master/kythe/typescript/SCHEMA.md">schema</a>
for entries emitted by the indexer,</li>
  <li>a
<a href="https://github.com/kythe/kythe/blob/35a252f56067d2f2043a7edb758b6825e35a38f1/kythe/typescript/indexer.ts#L96">plugin model</a>
for adding additional functionality to the indexer.
    <ul>
      <li>now used by three separate indexers</li>
    </ul>
  </li>
</ul>

<p>Like the Angular indexer, the TypeScript indexer runs on all of Google’s
codebase, which consists of thousands of TypeScript projects and is browsed by
more than 45K developers.</p>

<h3 id="collaboration-n-friends">
<a class="header-anchor" href="#collaboration-n-friends"></a>Collaboration ‘n’ Friends</h3>

<p>My intern host was <a href="https://github.com/kyliau">Keen Yee Liau</a>, an incredible
individual from whom I learned a tremendous amount (especially about philosophy
and life). I consider us good friends now, and we will continue to keep
collaborating.</p>

<p>I collaborated with <a href="https://github.com/evmar">Evan Martin</a>, who built the Kythe
TypeScript indexer and works on TypeScript at Google. I also worked extensively
with <a href="https://github.com/alxhub">Alex Rickabaugh</a>, who is the code owner of the
Angular compiler. I communicated quite often with the
<a href="https://github.com/kythe">Kythe team</a> and with two other individuals developing
indexers with TypeScript indexer plugins.</p>

<p>The entirety of the Angular team was amazing. Each presented me with new ideas
and helped create a diverse, accepting environment where I could literally let
my hair down.</p>

<p>Finally, I lived in a “Hacker Home” with a healthy
amount<span class="note"><label for="2324" class="margin-toggle sidenote-number"></label></span><input type="checkbox" id="2324" class="margin-toggle"><span class="sidenote">23? 24? It was a
lot.</span> of other individuals who offered me new perspectives and shared with me
a joyful summer.</p>

<p><span class="note"><label for="dino" class="margin-toggle">⊕</label></span><input type="checkbox" id="dino" class="margin-toggle"><span class="marginnote">These names likely mean nothing to you, but the picture only missed Dino and Courtney <img class="emoji" title=":cry:" alt=":cry:" src="https://gitlab.com/ayazhafiz/emoji-img/raw/master/public/emoji/unicode/1f622.png" height="20" width="20"></span></p>

<figure><img src="/assets/img/hh2019.jpg"><figcaption>Mountain View Hacker Home, Summer 2019</figcaption></figure>

<h3 id="what-i-learned">
<a class="header-anchor" href="#what-i-learned"></a>What I learned</h3>

<p>In no particular order,</p>

<ul>
  <li>New languages and technologies.
    <ul>
      <li>Lots: <a href="https://github.com/angular/angular">Angular</a>,
<a href="https://github.com/kythe/kythe">Kythe</a>,
<a href="https://github.com/bazel/bazel">Bazel</a>,
<a href="https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API">TypeScript compiler</a>
</li>
      <li>Some: <a href="https://golang.org">Go lang</a>
</li>
    </ul>
  </li>
  <li>Programming language and compiler design.
    <ul>
      <li>Influenced by the TypeScript and Angular compilers.</li>
      <li>
<em>Design a compiler to support semantic analysis from the start</em>. This may
seem cumbersome because the primary goal of a new compiler is to emit code
quickly and correctly, not have support for language analysis features, but
designing for language analysis features will decrease cost of work
substantially down the line. Many compilers face the issue of high cost,
including Angular’s and Rust’s.</li>
    </ul>
  </li>
  <li>Advanced and idiomatic TypeScript.</li>
  <li>How to approach
<a href="https://docs.google.com/presentation/d/18FwLIKWiMrvgxkDFUKiaMeHfzn3ScMVf4uq9snX3fGY/edit?usp=sharing">large codebases and open-source projects</a>.</li>
  <li>Meta stuff!
    <ul>
      <li>More about who I am as a person.</li>
      <li>What I want from a job (right now).
        <ul>
          <li>Interesting problems, and preferably impact. Less so money.</li>
        </ul>
      </li>
      <li>
<a href="https://soundcloud.com/dvmvnds/sets/a-something-to-jacky">How to See the World More and Worry Less</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="where-im-going--next-goals">
<a class="header-anchor" href="#where-im-going--next-goals"></a><span class="el">Where I’m going:</span>  Next Goals</h3>

<p>My internship is over, but my work isn’t. In no particular order, my goals for
the next semester are:</p>

<ul>
  <li>Continue contributing to <a href="https://github.com/angular/angular">Angular</a>.
    <ul>
      <li>My current focus is on
<a href="https://github.com/angular/angular/issues/31898">fixing inconsistencies and stabilizing</a>
the Angular compiler.</li>
      <li>I hope to also contribute to the
<a href="https://github.com/angular/angular/tree/master/packages/language-service">Angular language service</a>,
expanding on the knowledge I learned building the Angular indexer.</li>
    </ul>
  </li>
  <li>Continue contributing to <a href="https://github.com/kythe/kythe">Kythe</a>.
    <ul>
      <li>There is work to be done with
<a href="https://github.com/kythe/kythe/pull/3934">Code Search UI limitations</a>.</li>
      <li>The TypeScript indexer still has interesting places to grow in, including
some refactorings of the codebase and supporting lower-priority
cross-reference features.</li>
    </ul>
  </li>
  <li>
<span id="share-experience">Find ways to share and give my experience to
others.</span>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">cc</code> post coming soon.</li>
    </ul>
  </li>
  <li>Write and Talk.
    <ul>
      <li>Write a blog post about my experiences contributing to Angular, based off my
<a href="https://docs.google.com/presentation/d/18FwLIKWiMrvgxkDFUKiaMeHfzn3ScMVf4uq9snX3fGY/edit?usp=sharing">presentation</a>
on the same topic.</li>
      <li>Find an Angular conference to attend.</li>
    </ul>
  </li>
  <li>Take interesting classes.
    <ul>
      <li>In my (hopeful) lineup for the next two semesters are Distributed Systems,
Algorithms, Compiler Design, Cryptography, Synthetic Chemistry, and Physical
Chemistry.</li>
    </ul>
  </li>
  <li>Perform an analysis of how various student groups at my university operate.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">cc</code> post coming after project completion.</li>
    </ul>
  </li>
  <li>Be a good TA for <a href="https://vuse-cs3251.github.io">CS3251</a>.
    <ul>
      <li>Develop, spread <a href="https://github.com/ayazhafiz/patterns"><code class="language-plaintext highlighter-rouge">patterns</code></a>.</li>
    </ul>
  </li>
  <li>(Hopefully) find a job for Summer 2020.</li>
</ul>

<h2 id="epi">
<a class="header-anchor" href="#epi"></a>Epi</h2>

<p>If you got this far, you probably want to talk. Cool, I do too! The best way to
contact me is via
<a href="mailto:ayaz.hafiz.1@gmail.com?subject=Re:%20Summer%202019%20-%20CC">email</a>.</p>

</article>

<section class="footer">
  
  <a href="/articles/19/smart-is-not-a-good-word">« "Smart" Is Not a Good Word</a>
  
  <span><img class="emoji" title=":link:" alt=":link:" src="https://gitlab.com/ayazhafiz/emoji-img/raw/master/public/emoji/unicode/1f517.png" height="20" width="20"> 
    <span>​
      <script type="math/tex">
        \text{Definition}\subseteq\text{Reference}
      </script></span>
  </span>
  
  <a href="/articles/19/equivalence-matters">Equivalence Matters »</a>
  
</section>

<script type="text/javascript">
  function $(query) {
    return document.querySelector(query);
  }

  function $$(query) {
    return Array.from(document.querySelectorAll(query));
  }

  function isFullWidth() {
    return $(".post").classList.contains("full");
  }

  function toggleFullWidth() {
    const isFull = isFullWidth();
    isFull
      ? $(".post").classList.remove("full")
      : $(".post").classList.add("full");
    toggleShowHideNotes(!isFull);
    toggleShowHideNotesSwitch(!isFull);
    return !isFull;
  }

  function toggleShowHideNotes(isFullWidth) {
    const notes = $$(".marginnote").concat($$(".sidenote"));
    notes.forEach(note => {
      isFullWidth
        ? note.classList.add("maybe-hide")
        : note.classList.remove("maybe-hide");
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    $$(".note").forEach(toggle =>
      toggle.addEventListener("click", () => {
        if (isFullWidth()) {
          toggleFullWidth();
        }
      })
    );
  });
</script>

        </div>
      </div>
    </div>
  </body>
</html>
