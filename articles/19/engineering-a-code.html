

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?" />

<link rel="alternate" type="application/atom+xml" title="cc - Ayaz Hafiz" href="/feed-rrs2.xml">


<title>
  
    Over-Engineering a Code
  
</title>
<meta name="description" content="An example of over-generalization." />

<link
  rel="canonical"
  href="/articles/19/engineering-a-code"
/>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    TeX: {
      Macros: {
        co: "\\colon",
        msf: "\\mathsf",
        Ra: "\\Rightarrow",
        Def: "\\text{Definition.}",
        Thm: "\\text{Theorem.}",
        Pf: "\\text{Proof.}",
        eps: "\\epsilon",
        lam: "\\lambda",
        lt: "<",
        
      },
    }
  });
  MathJax.Hub.Queue(function () {
    document.body.setAttribute('render-done', '');
  });
</script>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
></script>

<link
  rel="stylesheet"
  type="text/css"
  href="/css/shiki.css?1676942273668462732"
/>




    <link
      rel="stylesheet"
      type="text/css"
      href="/css/post.css?1676942273668462732"
    />
  </head>

  <style></style>

  <body>
    <div class="container post">
      <div class="panel">
        <div class="column-right over-engineering a code-main">
          <section class="nav">
  <a class="nav-link" href="/about">about</a
  ><a class="nav-link" href="/cc">cc</a
  ><a class="nav-link" href="/visual">visual</a>
</section>
 <h1 class="title">Over-Engineering a Code</h1>
<p class="byline">February 28, 2019</p>

<article class="post">
  
  <p>Say you are a software engineer, or developer, or whatever other abstracted
word for <em>programmer</em> that has some meaning to you. Say you have also been given
some scientific computation problem, like estimating the value of <span>​<script type="math/tex"> \pi </script></span> with the
<a href="https://en.wikipedia.org/wiki/Monte_Carlo_method">Monte Carlo</a> method.</p>
<blockquote>
<p>Inscribe a circle of radius <span>​<script type="math/tex"> \frac{1}{2} </script></span> in a square of length
<span>​<script type="math/tex"> 1 </script></span>. Then the probability a random point generated in the
square is also inside the circle is equal to the ratio of the circle's area to the
square's, which is <span>​<script type="math/tex"> \frac{\pi}{4} </script></span>.</p>
<p>We now have a method for approximating <span>​<script type="math/tex"> \frac{\pi}{4} </script></span> by generating a set of
random points in the square and finding the ratio of those points also inside the circle.
This value multiplied by 4 gives us an estimate of <span>​<script type="math/tex"> \pi </script></span>, which becomes more
precise with an increasing volume of generated points.</p>
</blockquote>
<p>Your friend is an electrical engineer, and knows how to program in JavaScript. She quickly codes a simple, easily-understandable procedure:</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">1e6</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const CIRCLE_RADIUS: 0.5' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">0.5</span><span style="color: #000000">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='function inCircle(x: any, y: any): boolean' >inCircle</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) x: any' >x</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(parameter) y: any' >y</data-lsp></span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let pointRadius: number' >pointRadius</data-lsp></span><span style="color: #000000"> = </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns the square root of a number.&#10;&#10;(method) Math.sqrt(x: number): number' >sqrt</data-lsp></span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns the value of a base expression taken to a specified power.&#10;&#10;(method) Math.pow(x: number, y: number): number' >pow</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) x: any' >x</data-lsp></span><span style="color: #000000"> - </span><span style="color: #0070C1"><data-lsp lsp='const CIRCLE_RADIUS: 0.5' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">) + </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns the value of a base expression taken to a specified power.&#10;&#10;(method) Math.pow(x: number, y: number): number' >pow</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) y: any' >y</data-lsp></span><span style="color: #000000"> - </span><span style="color: #0070C1"><data-lsp lsp='const CIRCLE_RADIUS: 0.5' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">  );</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let pointRadius: number' >pointRadius</data-lsp></span><span style="color: #000000"> &lt; </span><span style="color: #0070C1"><data-lsp lsp='const CIRCLE_RADIUS: 0.5' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let points: any[]' >points</data-lsp></span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99"><data-lsp lsp='var Array: ArrayConstructor&#10;new (arrayLength?: number | undefined) => any[] (+2 overloads)' >Array</data-lsp></span><span style="color: #000000">(</span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000">);</span></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000"> &lt; </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000">; ++</span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let x: number' >x</data-lsp></span><span style="color: #000000"> = </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let y: number' >y</data-lsp></span><span style="color: #000000"> = </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080"><data-lsp lsp='let points: any[]' >points</data-lsp></span><span style="color: #000000">[</span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000">] = [</span><span style="color: #001080"><data-lsp lsp='let x: number' >x</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='let y: number' >y</data-lsp></span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let circlePoints: number' >circlePoints</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000"> &lt; </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000">; ++</span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> [</span><span style="color: #001080"><data-lsp lsp='let x: any' >x</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='let y: any' >y</data-lsp></span><span style="color: #000000">] = </span><span style="color: #001080"><data-lsp lsp='let points: any[]' >points</data-lsp></span><span style="color: #000000">[</span><span style="color: #001080"><data-lsp lsp='let i: number' >i</data-lsp></span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #795E26"><data-lsp lsp='function inCircle(x: any, y: any): boolean' >inCircle</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='let x: any' >x</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='let y: any' >y</data-lsp></span><span style="color: #000000">)) {</span></div><div class='line'><span style="color: #000000">    ++</span><span style="color: #001080"><data-lsp lsp='let circlePoints: number' >circlePoints</data-lsp></span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #001080"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #000000">(</span><span style="color: #A31515">`Samples: </span><span style="color: #0000FF">${</span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #000000">(</span><span style="color: #A31515">`Estimate of pi: </span><span style="color: #0000FF">${</span><span style="color: #000000FF">(</span><span style="color: #001080"><data-lsp lsp='let circlePoints: number' >circlePoints</data-lsp></span><span style="color: #000000FF"> </span><span style="color: #000000">/</span><span style="color: #000000FF"> </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000FF">) </span><span style="color: #000000">*</span><span style="color: #000000FF"> </span><span style="color: #098658">4</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div></code></div></pre>
<p>You<span class="note"><label for="actually-you" class="margin-toggle sidenote-number"></label></span><input type="checkbox" id="actually-you" class="margin-toggle" /><span class="sidenote">perhaps vicariously through another</span>, having already taken on some abstracted title for yourself, chose instead to over-engineer her perfectly good solution to be <em>TheBestCode</em>™</p>
<h2 id="1%3A-everything-functional" tabindex="-1"><a class="header-anchor" href="#1%3A-everything-functional" aria-hidden="true"></a><span class='el'>1:</span>  Everything Functional</h2>
<p>Since the only operations done here are on an array, all the loops can be eliminated in favor of immutable function calls on the original array. Even the instantiation of random points in the array can be sugared into the initializer.</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const pi_4: number' >pi_4</data-lsp></span><span style="color: #000000"> = </span><span style="color: #267F99"><data-lsp lsp='var Array: ArrayConstructor' >Array</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Creates an array from an iterable object.&#10;&#10;(method) ArrayConstructor.from&lt;any, number[]>(iterable: Iterable&lt;any> | ArrayLike&lt;any>, mapfn: (v: any, k: number) => number[], thisArg?: any): number[][] (+3 overloads)' >from</data-lsp></span><span style="color: #000000">({ </span><span style="color: #001080"><data-lsp lsp='(property) ArrayLike&lt;T>.length: number' >length</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">                        () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> [</span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">(), </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">()])</span></div><div class='line'><span style="color: #000000">                  .</span><span style="color: #795E26"><data-lsp lsp='Returns the elements of an array that meet the condition specified in a callback function.&#10;&#10;(method) Array&lt;number[]>.filter(predicate: (value: number[], index: number, array: number[][]) => unknown, thisArg?: any): number[][] (+1 overload)' >filter</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) pt: number[]' >pt</data-lsp></span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='any' >inCircle</data-lsp></span><span style="color: #000000">(...</span><span style="color: #001080"><data-lsp lsp='(parameter) pt: number[]' >pt</data-lsp></span><span style="color: #000000">))</span></div><div class='line'><span style="color: #000000">                  .</span><span style="color: #001080"><data-lsp lsp='Gets or sets the length of the array. This is a number one higher than the highest index in the array.&#10;&#10;(property) Array&lt;number[]>.length: number' >length</data-lsp></span><span style="color: #000000"> / </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #001080"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #000000">(</span><span style="color: #A31515">`Samples: </span><span style="color: #0000FF">${</span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #000000">(</span><span style="color: #A31515">`Estimate of pi: </span><span style="color: #0000FF">${</span><span style="color: #001080"><data-lsp lsp='const pi_4: number' >pi_4</data-lsp></span><span style="color: #000000FF"> </span><span style="color: #000000">*</span><span style="color: #000000FF"> </span><span style="color: #098658">4</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="2%3A-on-incircle" tabindex="-1"><a class="header-anchor" href="#2%3A-on-incircle" aria-hidden="true"></a><span class='el'>2:</span>  On <code>inCircle</code></h2>
<p>~Idiomatic~ JavaScript calls for arrow notation on small functions, so that's what we'll do. We can also allow for a variable circle radius - of course, that's totally useless for this example, but makes the function ~reusable~. Finally, there is a marginal cost reduction in comparing the square of the euclidean distance to the square of the radius rather than computing a square root.</p>
<p>This gives the crafted program:</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const inCircle: (x: any, y: any, CIRCLE_RADIUS?: number) => boolean' >inCircle</data-lsp></span><span style="color: #000000"> = (</span><span style="color: #001080"><data-lsp lsp='(parameter) x: any' >x</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(parameter) y: any' >y</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">0.5</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns the value of a base expression taken to a specified power.&#10;&#10;(method) Math.pow(x: number, y: number): number' >pow</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) x: any' >x</data-lsp></span><span style="color: #000000"> - </span><span style="color: #0070C1"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">) + </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns the value of a base expression taken to a specified power.&#10;&#10;(method) Math.pow(x: number, y: number): number' >pow</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) y: any' >y</data-lsp></span><span style="color: #000000"> - </span><span style="color: #0070C1"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">) &lt;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns the value of a base expression taken to a specified power.&#10;&#10;(method) Math.pow(x: number, y: number): number' >pow</data-lsp></span><span style="color: #000000">(</span><span style="color: #0070C1"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">);</span></div></code></div></pre>
<p>We're not done yet. If we take a quarter circle of radius 1 inscribed in the square instead, the ratio of quarter-circle-to-square area remains <span>​<script type="math/tex"> {\pi\over4} </script></span>, but now the center of the circle is at the origin, which eliminates two subtractions in the function call. The code is further reduced with JavaScript's exponentiation operator.</p>
<p>For now, this will be our final form:</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const inCircle: (x: any, y: any, CIRCLE_RADIUS?: number) => boolean' >inCircle</data-lsp></span><span style="color: #000000"> = (</span><span style="color: #001080"><data-lsp lsp='(parameter) x: any' >x</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(parameter) y: any' >y</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080"><data-lsp lsp='(parameter) x: any' >x</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000"> + </span><span style="color: #001080"><data-lsp lsp='(parameter) y: any' >y</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000"> &lt; </span><span style="color: #0070C1"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="3%3A-defining-and-objectifying" tabindex="-1"><a class="header-anchor" href="#3%3A-defining-and-objectifying" aria-hidden="true"></a><span class='el'>3:</span>  Defining and Objectifying</h2>
<p>But what <em>is</em> a point? In this case, a pair of <span>​<script type="math/tex"> (x, y) </script></span> coordinates. Let's define the points as named tuples:</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const inCircle: (point: any, CIRCLE_RADIUS?: number) => boolean' >inCircle</data-lsp></span><span style="color: #000000"> = (</span><span style="color: #001080"><data-lsp lsp='(parameter) point: any' >point</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080"><data-lsp lsp='(parameter) point: any' >point</data-lsp></span><span style="color: #000000">.</span><span style="color: #001080"><data-lsp lsp='any' >x</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000"> + </span><span style="color: #001080"><data-lsp lsp='(parameter) point: any' >point</data-lsp></span><span style="color: #000000">.</span><span style="color: #001080"><data-lsp lsp='any' >y</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000"> &lt; </span><span style="color: #0070C1"><data-lsp lsp='(parameter) CIRCLE_RADIUS: number' >CIRCLE_RADIUS</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const pi_4: number' >pi_4</data-lsp></span><span style="color: #000000"> = </span><span style="color: #267F99"><data-lsp lsp='var Array: ArrayConstructor' >Array</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Creates an array from an iterable object.&#10;&#10;(method) ArrayConstructor.from&lt;any, {&#10;    x: number;&#10;    y: number;&#10;}>(iterable: Iterable&lt;any> | ArrayLike&lt;any>, mapfn: (v: any, k: number) => {&#10;    x: number;&#10;    y: number;&#10;}, thisArg?: any): {&#10;    x: number;&#10;    y: number;&#10;}[] (+3 overloads)' >from</data-lsp></span><span style="color: #000000">({ </span><span style="color: #001080"><data-lsp lsp='(property) ArrayLike&lt;T>.length: number' >length</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">                        () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> ({ </span><span style="color: #001080"><data-lsp lsp='(property) x: number' >x</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">(), </span></div><div class='line'><span style="color: #000000">                                 </span><span style="color: #001080"><data-lsp lsp='(property) y: number' >y</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">() }))</span></div><div class='line'><span style="color: #000000">                   .</span><span style="color: #795E26"><data-lsp lsp='Returns the elements of an array that meet the condition specified in a callback function.&#10;&#10;(method) Array&lt;{ x: number; y: number; }>.filter(predicate: (value: {&#10;    x: number;&#10;    y: number;&#10;}, index: number, array: {&#10;    x: number;&#10;    y: number;&#10;}[]) => unknown, thisArg?: any): {&#10;    x: number;&#10;    y: number;&#10;}[] (+1 overload)' >filter</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) pt: {&#10;    x: number;&#10;    y: number;&#10;}' >pt</data-lsp></span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const inCircle: (point: any, CIRCLE_RADIUS?: number) => boolean' >inCircle</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='(parameter) pt: {&#10;    x: number;&#10;    y: number;&#10;}' >pt</data-lsp></span><span style="color: #000000">))</span></div><div class='line'><span style="color: #000000">                   .</span><span style="color: #001080"><data-lsp lsp='Gets or sets the length of the array. This is a number one higher than the highest index in the array.&#10;&#10;(property) Array&lt;{ x: number; y: number; }>.length: number' >length</data-lsp></span><span style="color: #000000"> / </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000">;</span></div></code></div></pre>
<p>We abstracted <code>inCircle</code> to be of any radius earlier, but of course that's kind of useless since the function is specifically designed for measuring <span>​<script type="math/tex"> \pi </script></span>. What we should do is wrap our estimation script into one experimentation procedure that accepts a variable point sample size. This is the ultimate abstraction we could ask for.</p>
<p>After a multitude of revisions and totally misaligned priorities, we arrive at paradise.</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000"> = </span><span style="color: #098658">1e6</span><span style="color: #000000">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const piEstimate: (numPoints: any) => number' >piEstimate</data-lsp></span><span style="color: #000000"> = </span><span style="color: #001080"><data-lsp lsp='(parameter) numPoints: any' >numPoints</data-lsp></span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const inCircle: (point: any) => boolean' >inCircle</data-lsp></span><span style="color: #000000"> = </span><span style="color: #001080"><data-lsp lsp='(parameter) point: any' >point</data-lsp></span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='(parameter) point: any' >point</data-lsp></span><span style="color: #000000">.</span><span style="color: #001080"><data-lsp lsp='any' >x</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000"> + </span><span style="color: #001080"><data-lsp lsp='(parameter) point: any' >point</data-lsp></span><span style="color: #000000">.</span><span style="color: #001080"><data-lsp lsp='any' >y</data-lsp></span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000"> &lt; </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> ((</span><span style="color: #267F99"><data-lsp lsp='var Array: ArrayConstructor' >Array</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Creates an array from an iterable object.&#10;&#10;(method) ArrayConstructor.from&lt;any, {&#10;    x: number;&#10;    y: number;&#10;}>(iterable: Iterable&lt;any> | ArrayLike&lt;any>, mapfn: (v: any, k: number) => {&#10;    x: number;&#10;    y: number;&#10;}, thisArg?: any): {&#10;    x: number;&#10;    y: number;&#10;}[] (+3 overloads)' >from</data-lsp></span><span style="color: #000000">({ </span><span style="color: #001080"><data-lsp lsp='(property) ArrayLike&lt;T>.length: number' >length</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='(parameter) numPoints: any' >numPoints</data-lsp></span><span style="color: #000000"> }, </span></div><div class='line'><span style="color: #000000">                      () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> ({ </span><span style="color: #001080"><data-lsp lsp='(property) x: number' >x</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">(),</span></div><div class='line'><span style="color: #000000">                               </span><span style="color: #001080"><data-lsp lsp='(property) y: number' >y</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #267F99"><data-lsp lsp='An intrinsic object that provides basic mathematics functionality and constants.&#10;&#10;var Math: Math' >Math</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='Returns a pseudorandom number between 0 and 1.&#10;&#10;(method) Math.random(): number' >random</data-lsp></span><span style="color: #000000">() }))</span></div><div class='line'><span style="color: #000000">                .</span><span style="color: #795E26"><data-lsp lsp='Returns the elements of an array that meet the condition specified in a callback function.&#10;&#10;(method) Array&lt;{ x: number; y: number; }>.filter(predicate: (value: {&#10;    x: number;&#10;    y: number;&#10;}, index: number, array: {&#10;    x: number;&#10;    y: number;&#10;}[]) => unknown, thisArg?: any): {&#10;    x: number;&#10;    y: number;&#10;}[] (+1 overload)' >filter</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='const inCircle: (point: any) => boolean' >inCircle</data-lsp></span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">                .</span><span style="color: #001080"><data-lsp lsp='Gets or sets the length of the array. This is a number one higher than the highest index in the array.&#10;&#10;(property) Array&lt;{ x: number; y: number; }>.length: number' >length</data-lsp></span><span style="color: #000000"> / </span><span style="color: #001080"><data-lsp lsp='(parameter) numPoints: any' >numPoints</data-lsp></span><span style="color: #000000">) * </span><span style="color: #098658">4</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #001080"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #000000">(</span><span style="color: #A31515">`Samples: </span><span style="color: #0000FF">${</span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #000000">(</span><span style="color: #A31515">`Estimate of pi: </span><span style="color: #0000FF">${</span><span style="color: #795E26"><data-lsp lsp='const piEstimate: (numPoints: any) => number' >piEstimate</data-lsp></span><span style="color: #000000FF">(</span><span style="color: #0070C1"><data-lsp lsp='const NUM_POINTS: 1000000' >NUM_POINTS</data-lsp></span><span style="color: #000000FF">)</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div></code></div></pre>


</article>

<section class="footer">
  
  <a href="/articles/18/the-case-of-the-missing-alcohol"
    >&laquo; The Case of the Missing Alcohol Proton</a
  >
  
  <span
    ><img class='emoji' alt='strawberry' src='https://gitlab.com/ayazhafiz/emoji-img/raw/master/public/emoji/unicode/1f353.png' height=20 width=20></img>&emsp;
    <span
      >&#8203;
      <script type="math/tex">
        \Gamma\left({1\over2}\right) = \sqrt{\pi}
      </script></span
    >
  </span>
  
  <a href="/articles/19/smart-is-not-a-good-word">"Smart" Is Not a Good Word &raquo;</a>
  
</section>

<script src="https://utteranc.es/client.js"
        repo="ayazhafiz/gww-utterances"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

<script type="text/javascript">
  function $(query) {
    return document.querySelector(query);
  }

  function $$(query) {
    return Array.from(document.querySelectorAll(query));
  }

  function isFullWidth() {
    return $(".post").classList.contains("full");
  }

  function toggleFullWidth() {
    const isFull = isFullWidth();
    isFull
      ? $(".post").classList.remove("full")
      : $(".post").classList.add("full");
    toggleShowHideNotes(!isFull);
    toggleShowHideNotesSwitch(!isFull);
    return !isFull;
  }

  function toggleShowHideNotes(isFullWidth) {
    const notes = $$(".marginnote").concat($$(".sidenote"));
    notes.forEach(note => {
      isFullWidth
        ? note.classList.add("maybe-hide")
        : note.classList.remove("maybe-hide");
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    $$(".note").forEach(toggle =>
      toggle.addEventListener("click", () => {
        if (isFullWidth()) {
          toggleFullWidth();
        }
      })
    );
  });
</script>

        </div>
      </div>
    </div>

    <div class="bottom-bar">
    <details>
  <summary>Analytics</summary>
  By visiting this site, you agree to its use of <a href="https://www.cloudflare.com/analytics/"
    >Cloudflare Analytics</a
  >. No identifiable information is transmitted to Cloudflare. See
  <a href="https://www.cloudflare.com/web-analytics/">Cloudflare Analytics user privacy</a>.
</details>

</details>

    </div>
  </body>
</html>
